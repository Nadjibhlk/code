</div>
            `;
            
            updateQuizProgress();
            updateProgress();
        }

        function updateQuizProgress() {
            const progress = (currentQuizQuestion / quizQuestions.length) * 100;
            document.getElementById('quiz-progress').style.width = progress + '%';
        }

        function updateCaliperReading() {
            const value = document.getElementById('caliper-slider').value;
            const reading = parseFloat(value).toFixed(2);
            document.getElementById('caliper-reading').textContent = reading + ' mm';
            document.getElementById('measurement-value').textContent = reading;
        }

        function updateMicrometerReading() {
            const value = document.getElementById('micrometer-slider').value;
            const reading = parseFloat(value).toFixed(2);
            document.getElementById('micrometer-reading').textContent = reading + ' mm';
        }

        function showConceptDetails(concept) {
            const detailsDiv = document.getElementById('concept-details');
            const concepts = {
                calibration: {
                    title: "Calibration (Étalonnage)",
                    content: "Calibration is the operation of measuring known quantities Gi with a measuring instrument to establish the relationship between measured values Mi and known values. This creates a calibration curve showing deviations from ideal behavior. The process involves comparing instrument readings against certified reference standards to determine measurement errors and establish correction factors."
                },
                precision: {
                    title: "Precision (Précision)",
                    content: "Precision refers to the difference between the measured value and the true value, typically expressed as a percentage. It can be calculated relative to the true value or full scale. High precision means measurements are close to the true value. Formula: Precision (%) = |Measured Value - True Value| / True Value × 100"
                },
                accuracy: {
                    title: "Accuracy (Justesse)",
                    content: "Accuracy characterizes a measuring instrument with low systematic errors. An accurate instrument produces measurements where the most probable value is very close to the true value. It's about how close measurements are to the actual or true value, regardless of precision."
                },
                repeatability: {
                    title: "Repeatability (Répétabilité)",
                    content: "Repeatability is the closeness of agreement between measurement results of the same quantity under identical conditions: same operator, same measuring instrument, same location, same measurement method, and measurements carried out over a short period of time."
                },
                reproducibility: {
                    title: "Reproducibility (Reproductibilité)",
                    content: "Reproducibility is the closeness of agreement between measurement results using identical instruments but with different operators, different times, and different locations. It tests the consistency of measurements across various conditions and personnel."
                },
                sensitivity: {
                    title: "Sensitivity (Sensibilité)",
                    content: "Sensitivity is the property of a measurement system to return to a predetermined equilibrium position after being subjected to small perturbations. It's often indicated as a function of time and determines how well the system can detect small changes in the measured quantity."
                }
            };

            const conceptData = concepts[concept];
            detailsDiv.innerHTML = `
                <h3>${conceptData.title}</h3>
                <p>${conceptData.content}</p>
            `;
            detailsDiv.style.display = 'block';

            conceptsLearned = Math.min(conceptsLearned + 1, 6);
            updateProgress();
        }

        function updateProgress() {
            // Update flashcard progress
            const flashcardPercent = Math.min((flashcardProgress / flashcards.length) * 100, 100);
            if (document.getElementById('flashcard-progress')) {
                document.getElementById('flashcard-progress').style.width = flashcardPercent + '%';
            }

            // Update concept progress
            const conceptPercent = (conceptsLearned / 6) * 100;
            if (document.getElementById('concept-progress')) {
                document.getElementById('concept-progress').style.width = conceptPercent + '%';
            }
        }

        function updateProgressDisplay() {
            // Update all progress displays
            const flashcardPercent = Math.min((flashcardProgress / flashcards.length) * 100, 100);
            const quizPercent = quizQuestions.length > 0 ? (quizScore / quizQuestions.length) * 100 : 0;
            const conceptPercent = (conceptsLearned / 6) * 100;

            document.getElementById('flashcard-progress').style.width = flashcardPercent + '%';
            document.getElementById('flashcard-count').textContent = `${Math.min(flashcardProgress, flashcards.length)} / ${flashcards.length} cards reviewed`;

            document.getElementById('quiz-performance').style.width = quizPercent + '%';
            document.getElementById('quiz-score').textContent = `${Math.round(quizPercent)}% average score`;

            document.getElementById('concept-progress').style.width = conceptPercent + '%';
            document.getElementById('concept-count').textContent = `${conceptsLearned} / 6 concepts learned`;
        }

        // Initialize progress tracking
        let progressData = {
            flashcardsViewed: new Set(),
            quizAttempts: [],
            conceptsExplored: new Set()
        };

        // Enhanced flip card function with progress tracking
        function flipCard(index) {
            const cards = document.querySelectorAll('.flashcard');
            cards[index].classList.toggle('flipped');
            
            if (cards[index].classList.contains('flipped') && !progressData.flashcardsViewed.has(index)) {
                progressData.flashcardsViewed.add(index);
                flashcardProgress = progressData.flashcardsViewed.size;
                updateProgress();
            }
        }

        // Add some interactive features
        function addInteractiveFeatures() {
            // Add keyboard navigation for flashcards
            document.addEventListener('keydown', function(e) {
                if (document.getElementById('flashcards').classList.contains('active')) {
                    const cards = document.querySelectorAll('.flashcard');
                    if (e.key === 'ArrowLeft' || e.key === 'ArrowRight') {
                        e.preventDefault();
                        // Cycle through cards with arrow keys
                        const currentFlipped = document.querySelector('.flashcard.flipped');
                        if (currentFlipped) {
                            currentFlipped.classList.remove('flipped');
                        }
                        
                        let nextIndex = 0;
                        if (currentFlipped) {
                            const currentIndex = Array.from(cards).indexOf(currentFlipped);
                            nextIndex = e.key === 'ArrowRight' ? 
                                (currentIndex + 1) % cards.length : 
                                (currentIndex - 1 + cards.length) % cards.length;
                        }
                        
                        cards[nextIndex].scrollIntoView({ behavior: 'smooth', block: 'center' });
                    }
                    
                    if (e.key === ' ' || e.key === 'Enter') {
                        e.preventDefault();
                        // Space or Enter to flip focused card
                        const visibleCards = Array.from(cards).filter(card => {
                            const rect = card.getBoundingClientRect();
                            return rect.top >= 0 && rect.bottom <= window.innerHeight;
                        });
                        
                        if (visibleCards.length > 0) {
                            const index = Array.from(cards).indexOf(visibleCards[0]);
                            flipCard(index);
                        }
                    }
                }
            });
        }

        // Initialize the application
        function initializeApp() {
            addInteractiveFeatures();
            updateProgressDisplay();
            
            // Add some welcome animations
            setTimeout(() => {
                document.querySelector('.header').style.animation = 'fadeIn 0.8s ease-out';
                document.querySelectorAll('.nav-card').forEach((card, index) => {
                    setTimeout(() => {
                        card.style.animation = 'fadeIn 0.6s ease-out';
                        card.style.animationDelay = `${index * 0.1}s`;
                    }, 200);
                });
            }, 100);
        }

        // Call initialization when DOM is loaded
        document.addEventListener('DOMContentLoaded', initializeApp);

        // Add some utility functions for enhanced experience
        function resetProgress() {
            if (confirm('Are you sure you want to reset all progress?')) {
                flashcardProgress = 0;
                quizScore = 0;
                conceptsLearned = 0;
                currentQuizQuestion = 0;
                progressData = {
                    flashcardsViewed: new Set(),
                    quizAttempts: [],
                    conceptsExplored: new Set()
                };
                updateProgressDisplay();
                alert('Progress has been reset!');
            }
        }

        function exportProgress() {
            const progressReport = {
                timestamp: new Date().toISOString(),
                flashcardsCompleted: flashcardProgress,
                quizScore: quizScore,
                conceptsLearned: conceptsLearned,
                totalFlashcards: flashcards.length,
                totalQuizQuestions: quizQuestions.length,
                totalConcepts: 6
            };
            
            const dataStr = JSON.stringify(progressReport, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            const url = URL.createObjectURL(dataBlob);
            
            const link = document.createElement('a');
            link.href = url;
            link.download = 'measurement_systems_progress.json';
            link.click();
            
            URL.revokeObjectURL(url);
        }

        // Add progress management buttons to the progress section
        function addProgressManagement() {
            const progressSection = document.getElementById('progress');
            const managementDiv = document.createElement('div');
            managementDiv.style.textAlign = 'center';
            managementDiv.style.marginTop = '30px';
            managementDiv.innerHTML = `
                <button onclick="resetProgress()" style="background: #f44336; color: white; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer; margin: 0 10px;">🔄 Reset Progress</button>
                <button onclick="exportProgress()" style="background: #4caf50; color: white; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer; margin: 0 10px;">📊 Export Progress</button>
            `;
            progressSection.appendChild(managementDiv);
        }

        // Enhanced concept exploration
        function enhanceConceptExploration() {
            const originalShowConceptDetails = showConceptDetails;
            showConceptDetails = function(concept) {
                originalShowConceptDetails(concept);
                progressData.conceptsExplored.add(concept);
                conceptsLearned = progressData.conceptsExplored.size;
                updateProgress();
            };
        }

        // Call enhancements
        setTimeout(() => {
            addProgressManagement();
            enhanceConceptExploration();
        }, 1000);

    </script>
</body>
</html>
